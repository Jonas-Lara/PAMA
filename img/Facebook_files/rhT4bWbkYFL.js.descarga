if (self.CavalryLogger) { CavalryLogger.start_js(["Avwth"]); }

__d("CometNewsFeedConnectionHandlerModern",["FBLogger","RelayFBConnectionHandler_UNSTABLE","relay-runtime","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g,h=(g=b("relay-runtime")).ConnectionHandler,i=g.ConnectionInterface,j=g.generateClientID,k=g.getRelayHandleKey,l="comet_news_feed",m="__connection_next_edge_index",n="received_edges_count";function a(a,c){var d,e=a.get(c.dataID);if(!e)return;var f=i.get();f=f.EDGES;if(c.args.before!=null)throw b("unrecoverableViolation")("The newsfeed connection does not support backward pagination by design","comet_feed");var g=e.getLinkedRecord(c.fieldKey);if(!g){b("FBLogger")("comet_feed").mustfix("Newsfeed connection is null in the store, this means no feed stories will be shown");return}var k=j(e.getDataID(),c.handleKey),l=e.getLinkedRecord(c.handleKey);d=(d=l)!=null?d:a.get(k);if(!d){var q=a.create(k,g.getType());q.setValue(0,m);q.copyFieldsFrom(g);k=g.getLinkedRecords(f);k&&(k=k.map(function(b){return h.buildConnectionEdge(a,q,b)}),q.setLinkedRecords(k,f),q.setValue(k.length,n));e.setLinkedRecord(q,c.handleKey);o(a,k,k,q,g);return}l==null&&e.setLinkedRecord(d,c.handleKey);var r=d;k=g.getLinkedRecords(f);k&&(k=k.map(function(b){return h.buildConnectionEdge(a,r,b)}),r.setValue(k.length,n));l=r.getLinkedRecords(f);r.copyFieldsFrom(g);e=[];d=new Set();if(c.args.after!=null||((c=(c=k)==null?void 0:c.length)!=null?c:0)===0){p((c=l)!=null?c:[],e,d)}p((l=k)!=null?l:[],e,d);r.setLinkedRecords(e,f);o(a,k,e,r,g)}function o(a,c,d,e,f){var g=i.get(),h=g.END_CURSOR,k=g.HAS_NEXT_PAGE,l=g.HAS_PREV_PAGE,m=g.PAGE_INFO;g=g.PAGE_INFO_TYPE;f=f.getLinkedRecord(m);var n=e.getLinkedRecord(m);n==null&&(n=a.create(j(e.getDataID(),m),g),e.setLinkedRecord(n,m));a=f==null?void 0:f.getValue(h);n.setValue(!1,l);n.setValue(((g=c==null?void 0:c.length)!=null?g:0)>0,k);e=d!=null?d[d.length-1]:null;m=null;e!=null&&(m=e.getValue("cursor"));if(m==null&&a==null){b("FBLogger")("comet_feed").info("Unable to set end_cursor as neither the server end cursor, or last edge cursor is defined, this can happen on initial load when there are no stories but shouldn't happen otherwise","comet_feed");return}n.setValue((f=a)!=null?f:m,h)}function c(a,b,c){b=k(l,b,null);return a.getLinkedRecord(b,c)}function d(a,c,d){return b("RelayFBConnectionHandler_UNSTABLE").unstable_getAllConnectionsWithKey(a,c,d,l)}function p(a,c,d){var e=i.get();e=e.NODE;for(var f=0;f<a.length;f++){var g=a[f];if(!g)continue;var h=g.getLinkedRecord(e);h=h&&h.getDataID();if(h==null){b("FBLogger")("comet_feed").mustfix("Found edge without deduplication nodeID in comet_news_feed, this can lead to duplicate feed stories being rendered");c.push(g);continue}if(d.has(h))continue;d.add(h);c.push(g)}}function f(a,c,d,e){if(d==null)return d;var f=i.get();f=f.EDGES;var g=c.getValue(m);if(!(typeof g==="number"))throw b("unrecoverableViolation")("CometNewsFeedConnectionHandler: Expected edgeIndex to be a number","comet_feed");e=(e=e)!=null?e:j(c.getDataID(),f,g);f=a.create(e,d.getType());f.copyFieldsFrom(d);c.setValue(g+1,m);return f}e.exports={buildConnectionEdge:f,getConnection:c,insertEdgeBefore:h.insertEdgeBefore,unstable_getAllConnectionsWithKey:d,update:a}}),null);
__d("XArticleContextMainDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/article_context/dialog/",{share_id:{type:"String",required:!0},entry_type:{type:"Enum",required:!0,enumType:1},trigger_log_id:{type:"String"},ft_msg:{type:"String"},__asyncDialog:{type:"Int"}})}),null);